---
layout: post
title: "Yii框架中的权限使用"
date: 2013-03-16 11:05
comments: true
categories: Program
---

权限功能的一直是各个PHP框架中比较核心的一个功能，只需要少量代码即可实现较复杂的权限管理。

Yii框架亦如此，但是使用框架中的权限功能还是需要一定的学习成本。这里分享一些自己学习和使用的经验。主要参考了Yii框架官方文档中的[授权和验证](http://www.yiiframework.com/doc/guide/1.1/zh_cn/topics.auth)部分，Yii权限扩展模块[Rights](http://code.google.com/p/yii-rights/)以及Yii的[CAuthManager](http://www.yiiframework.com/doc/api/1.1/CAuthManager)接口文档。

<!-- more -->

##基于角色的访问控制

由于项目中的权限需求比较复杂，所以直接使用了基于角色的访问控制(Role-Based Access Control)。

Yii框架的RBAC中，将权限分为三层：操作(operations)，任务(tasks)和角色(roles)。操作是权限中的最底层，是包含最少动作的一个集合(Rights中将每一个action视为一个Opreation，当然你也可以自己定义)；任务由若干操作组成，(Rights将一个Controller视作一个Task）；角色则由若干任务组成。为了保持灵活性，Yii允许同层的权限相互包含：一个操作可以包含其他操作，一个任务可以包含其他任务，一个角色可以包含其他角色。
